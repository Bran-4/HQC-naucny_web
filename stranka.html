<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diffieâ€“Hellman â€“ VizualizÃ¡cia vÃ½meny kÄ¾ÃºÄov</title>
  <style>
    :root{--blue:#0b5ed7;--muted:#94a3b8;--light:#f8fafc;--bg:#f1f5f9;--accent:#10b981;}
    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);margin:0;display:flex;flex-direction:column;min-height:100vh}
    nav{background:var(--blue);color:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center}
    nav .logo{font-weight:700}
    main{flex:1;padding:20px;max-width:1100px;margin:18px auto}
    .card{background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(11,94,215,0.08);border:2px solid rgba(11,94,215,0.06);margin-bottom:20px;}
    h1{color:var(--blue);margin:0 0 6px}
    h2{color:#1e293b;margin-top:0}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:30px;align-items:start;margin-top:20px;}
    .person{background:var(--light);border:2px solid #e2e8f0;border-radius:12px;padding:16px;text-align:center;}
    .person h3{margin-top:0;color:var(--blue)}
    label{display:block;font-weight:600;margin-top:8px;text-align:left;}
    input{width:100%;padding:8px;border-radius:8px;border:1px solid #cbd5e1}
    button{background:var(--blue);color:#fff;padding:8px 14px;border:none;border-radius:8px;cursor:pointer;margin-top:10px}
    .exchange-area{display:flex;justify-content:space-between;align-items:center;position:relative;margin-top:20px;}
    .arrow-line{position:relative;width:40%;height:2px;background:var(--blue);}
    .arrow-line::after{content:"";position:absolute;top:-6px;right:-6px;border-left:8px solid var(--blue);border-top:6px solid transparent;border-bottom:6px solid transparent;}
    .arrow-line.reverse{transform:scaleX(-1);}
    .arrow-label{position:absolute;top:-28px;left:50%;transform:translateX(-50%);background:#eef2ff;color:#0f172a;padding:4px 10px;border-radius:6px;font-size:14px;border:1px solid #cbd5e1;}
    .result{background:var(--light);border:1px solid #cbd5e1;border-radius:8px;padding:12px;margin-top:12px;text-align:left;}
    pre{background:#0f172a;color:#fff;padding:10px;border-radius:8px;overflow:auto}
    footer{background:var(--blue);color:#fff;padding:12px;text-align:center;font-size:13px}
    .highlight{background:#dcfce7;border:1px solid var(--accent);color:#065f46;padding:4px 8px;border-radius:6px;display:inline-block;margin-top:6px;}
  </style>
</head>
<body>
  <nav>
    <div class="logo">Kriptoveda â€“ VizualizÃ¡cia DH</div>
    <div>InteraktÃ­vne vysvetlenie Diffieâ€“Hellman</div>
  </nav>

  <main>
    <div class="card">
      <h1>ğŸ” Diffieâ€“Hellmanova vÃ½mena kÄ¾ÃºÄov</h1>
      <p>Tento nÃ¡stroj znÃ¡zorÅˆuje, ako si <strong>Alica</strong> a <strong>Bob</strong> vymenia spoloÄnÃ½ tajnÃ½ kÄ¾ÃºÄ cez nezabezpeÄenÃ½ kanÃ¡l pomocou matematickÃ½ch operÃ¡ciÃ­ modulo.</p>

      <div class="grid2">
        <!-- ALICE -->
        <div class="person" id="aliceBox">
          <h3>ğŸ‘©â€ğŸ’» Alica</h3>
          <label>PrivÃ¡tny kÄ¾ÃºÄ a:</label>
          <input type="number" id="a" value="6">
          <div id="aResult" class="result"></div>
        </div>

        <!-- BOB -->
        <div class="person" id="bobBox">
          <h3>ğŸ‘¨â€ğŸ’» Bob</h3>
          <label>PrivÃ¡tny kÄ¾ÃºÄ b:</label>
          <input type="number" id="b" value="15">
          <div id="bResult" class="result"></div>
        </div>
      </div>

      <div class="exchange-area">
        <div class="arrow-line" id="arrowA"><span class="arrow-label" id="labelA">A â†’ Bob</span></div>
        <div class="arrow-line reverse" id="arrowB"><span class="arrow-label" id="labelB">B â†’ Alica</span></div>
      </div>

      <div class="result" style="margin-top:40px">
        VerejnÃ© hodnoty: p = <input id="p" type="number" value="23" style="width:70px"> , g = <input id="g" type="number" value="5" style="width:50px">
        <br><button id="compute">Zobraz vÃ½poÄet</button>
      </div>

      <div id="sharedResult" class="result"></div>
      <pre id="steps">Tu sa zobrazÃ­ podrobnÃ½ vÃ½poÄet...</pre>
    </div>

    <div class="card">
      <h2>ğŸ§  Vysvetlenie</h2>
      <p><strong>Diffieâ€“Hellman</strong> umoÅ¾Åˆuje dvom stranÃ¡m dohodnÃºÅ¥ sa na spoloÄnom tajnom ÄÃ­sle bez toho, aby ho poslali cez sieÅ¥. BezpeÄnosÅ¥ spoÄÃ­va v Å¥aÅ¾kosti vyrieÅ¡iÅ¥ tzv. <em>diskrÃ©tny logaritmus</em>.</p>
      <ol>
        <li>Alica a Bob sa dohodnÃº na verejnÃ½ch parametroch: <code>p</code> a <code>g</code>.</li>
        <li>Alica zvolÃ­ tajnÃ© <code>a</code>, Bob tajnÃ© <code>b</code>.</li>
        <li>Alica vypoÄÃ­ta <code>A = g^a mod p</code>, Bob <code>B = g^b mod p</code>.</li>
        <li>Po vÃ½mene A a B si kaÅ¾dÃ½ vypoÄÃ­ta <code>s = B^a mod p</code> (Alica) a <code>s = A^b mod p</code> (Bob). VÃ½sledok je rovnakÃ½.</li>
      </ol>
    </div>
  </main>

  <footer>Â© 2025 Kriptoveda â€“ vzdelÃ¡vacie demo (nepouÅ¾Ã­vajte na reÃ¡lne Å¡ifrovanie)</footer>

  <script>
    function modPow(base, exp, mod){
      base = BigInt(base); exp = BigInt(exp); mod = BigInt(mod);
      let res = 1n; base = base % mod;
      while(exp > 0n){
        if(exp % 2n === 1n) res = (res * base) % mod;
        base = (base * base) % mod;
        exp = exp / 2n;
      }
      return res;
    }

    const el = id => document.getElementById(id);

    el('compute').addEventListener('click', ()=>{
      const p = BigInt(el('p').value);
      const g = BigInt(el('g').value);
      const a = BigInt(el('a').value);
      const b = BigInt(el('b').value);

      const A = modPow(g,a,p);
      const B = modPow(g,b,p);
      const sAlice = modPow(B,a,p);
      const sBob = modPow(A,b,p);

      el('aResult').innerHTML = `<strong>Alica poÄÃ­ta:</strong><br>A = g^a mod p = ${g}^${a} mod ${p} = <span class='highlight'>${A}</span>`;
      el('bResult').innerHTML = `<strong>Bob poÄÃ­ta:</strong><br>B = g^b mod p = ${g}^${b} mod ${p} = <span class='highlight'>${B}</span>`;

      el('labelA').textContent = `A = ${A} â†’ Bob`;
      el('labelB').textContent = `B = ${B} â†’ Alica`;

      el('sharedResult').innerHTML = `ğŸ”‘ <strong>SpoloÄnÃ½ tajnÃ½ kÄ¾ÃºÄ:</strong><br>Alica: B^a mod p = ${B}^${a} mod ${p} = ${sAlice}<br>Bob: A^b mod p = ${A}^${b} mod ${p} = ${sBob}`;

      let steps = `VÃ½poÄet krokov:\n`;
      steps += `1ï¸âƒ£ VerejnÃ© parametre: p = ${p}, g = ${g}\n`;
      steps += `2ï¸âƒ£ Alica: A = ${g}^${a} mod ${p} = ${A}\n`;
      steps += `3ï¸âƒ£ Bob: B = ${g}^${b} mod ${p} = ${B}\n`;
      steps += `â¡ï¸ Alica â†’ Bob: posiela A = ${A}\n`;
      steps += `â¬…ï¸ Bob â†’ Alica: posiela B = ${B}\n`;
      steps += `5ï¸âƒ£ Alica vypoÄÃ­ta s = B^a mod p = ${sAlice}\n`;
      steps += `6ï¸âƒ£ Bob vypoÄÃ­ta s = A^b mod p = ${sBob}\n`;
      steps += `âœ… VÃ½sledok: ${sAlice === sBob ? 'Obaja majÃº rovnakÃ½ kÄ¾ÃºÄ!' : 'NieÄo nesedÃ­, skontrolujte Ãºdaje.'}`;
      el('steps').textContent = steps;
    });
  </script>
</body>
</html>